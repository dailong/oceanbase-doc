# 新增一个 case

本文介绍如何新增 case。

## 操作步骤

在通用的 t 目录下:

假设我们测试 create table like 这个功能，case 文件最好能反映测试点，比如create_table_like_syntax.test 为语法级别的测试。

1. 进入文件目录：

    ```bash
    cd oceanbase/tools/deploy/
    ```

2. 输入 case 文件的内容：

    ```bash
    vi mysqltest/t/sample.test
    ```

3. 生产结果文件：

    ```bash
    ./deploy.py ob1.mysqltest testset=sample record
    ```

4. 人工校验结果文件后（这步也可能通过执行与 MySQL 的对比来完成）:

    ```bash
    mv mysqltest/record/sample.record mysqltest/r/sample.result
    ```

    与 MySQL 对比的命令：

    ```bash
    ./deploy.py ob1.mysqltest testset=sample mysql=ip:port
    ```

    此时 MySQL 的文件生成在 `mysql_test/r/sample.result.my`，如果 MySQL 的结果文件可以直接作为结果文件，可以直接执行 `mv sample.result.my sample.result`。

5. 再运行检查一遍：

    ```bash
    ./deploy.py ob1.mysqltest testset=sample 
    ```

6. 提交时注意 git add 的时候要同时提交 test 文件和 result 文件。
